{"version":3,"sources":["webpack:///./auth/auth-settings.js","webpack:///./components/component-navbar/component-navbar.js","webpack:///./components/component-recipes/component-recipes.js","webpack:///./components/component-modals/component-modals.js","webpack:///./components/component-form/component-form.js","webpack:///./index.js","webpack:///./auth/auth.js","webpack:///./assets/images/recipes-logo.svg"],"names":["firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","dataBase","functions","Navbar","init","container","this","addToScreen","renderNavbar","position","element","insertAdjacentHTML","recipesLogo","setupNavbarUI","user","loggedInLinks","document","querySelectorAll","loggedOutLinks","accauntDetails","querySelector","adminItems","admin","forEach","item","style","display","collection","doc","uid","get","then","accauntDescription","email","data","bio","innerHTML","Recipes","renderRecipesList","initCollapsible","setupRecipeItem","recipesList","length","items","title","ingredients","description","image","addEventListener","elems","M","Collapsible","Modals","renderModals","initModals","Modal","dismissible","renderAccountModal","renderCreateRecipeModal","renderLoginModal","renderSignUpModal","Form","renderAdminForm","root","navbar","recipes","modals","form","signUpForm","logInForm","createForm","onAuthStateChanged","getIdTokenResult","idTokenResult","claims","onSnapshot","snapshot","docs","err","console","log","message","e","preventDefault","value","password","createUserWithEmailAndPassword","cred","set","modalSignUp","getInstance","close","reset","textContent","catch","signOut","signInWithEmailAndPassword","modalLogIn","add","modalCreate","toast","html","adminEmail","httpsCallable","addAdminRole","result","module","exports"],"mappings":"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","file":"main.ef543cd318294cbc0801.js","sourcesContent":["// Firebase App (the core Firebase SDK) is always required and must be listed first\r\nimport * as firebase from 'firebase/app';\r\n\r\n// If you enabled Analytics in your project, add the Firebase SDK for Analytics\r\n// import 'firebase/analytics';\r\n\r\n// Add the Firebase products that you want to use\r\nimport 'firebase/auth';\r\nimport 'firebase/firestore';\r\nimport 'firebase/functions'\r\n\r\n// TODO: Replace the following with your app's Firebase project configuration\r\nconst firebaseConfig = {\r\n  apiKey: 'AIzaSyDzQMWiK007Moog_T8BSEeZDjtYwQwb1tE',\r\n  authDomain: 'alexcode-book-of-recipes.firebaseapp.com',\r\n  databaseURL: 'https://alexcode-book-of-recipes.firebaseio.com',\r\n  projectId: 'alexcode-book-of-recipes',\r\n  storageBucket: 'alexcode-book-of-recipes.appspot.com',\r\n  messagingSenderId: '949923603478',\r\n  appId: '1:949923603478:web:19746653ff9266c606c137',\r\n  measurementId: 'G-Q6J9WYJKP6',\r\n};\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\n\r\nexport const auth = firebase.auth();\r\nexport const dataBase = firebase.firestore();\r\nexport const functions = firebase.functions();","import { dataBase } from '../../auth/auth-settings';\r\nimport recipesLogo from '../../assets/images/recipes-logo.svg';\r\nimport './component-navbar-style.scss';\r\n\r\nclass Navbar {\r\n  constructor() {}\r\n\r\n  init(container) {\r\n    this.addToScreen(container, 'beforeend', this.renderNavbar());\r\n  }\r\n\r\n  addToScreen(container, position, element) {\r\n    container.insertAdjacentHTML(position, element);\r\n  }\r\n\r\n  renderNavbar() {\r\n    return `\r\n      <nav class=\"z-depth-0 grey lighten-4\">\r\n        <div class=\"nav-wrapper container\">\r\n          <a href=\"#\" class=\"brand-logo\">\r\n            <img src=\"${recipesLogo}\">\r\n          </a>\r\n          <ul id=\"nav-mobile\" class=\"right hide-on-med-and-down\">\r\n            <li class=\"logged-in\" style=\"display: none;\">\r\n              <a href=\"#\" class=\"grey-text modal-trigger\" data-target=\"modal-account\">Account</a>\r\n            </li>\r\n            <li class=\"logged-in\" style=\"display: none;\">\r\n              <a href=\"#\" class=\"grey-text\" id=\"logout\">Logout</a>\r\n            </li>\r\n            <li class=\"admin\" style=\"display: none;\">\r\n              <a href=\"#\" class=\"grey-text modal-trigger\" data-target=\"modal-create\">Create Recipes</a>\r\n            </li>\r\n            <li class=\"logged-out\" style=\"display: none;\">\r\n              <a href=\"#\" class=\"grey-text modal-trigger\" data-target=\"modal-login\">Login</a>\r\n            </li>\r\n            <li class=\"logged-out\" style=\"display: none;\">\r\n              <a href=\"#\" class=\"grey-text modal-trigger\" data-target=\"modal-signup\">Sign up</a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </nav>`;\r\n  }\r\n\r\n  setupNavbarUI(user) {\r\n    const loggedInLinks = document.querySelectorAll('.logged-in');\r\n    const loggedOutLinks = document.querySelectorAll('.logged-out');\r\n    const accauntDetails = document.querySelector('.account-details');\r\n    const adminItems = document.querySelectorAll('.admin');\r\n\r\n    if (user) {\r\n      if (user.admin) {\r\n        adminItems.forEach(item => (item.style.display = 'block'));\r\n      }\r\n      dataBase\r\n        .collection('users')\r\n        .doc(user.uid)\r\n        .get()\r\n        .then(doc => {\r\n          const accauntDescription = `\r\n          <p>Logged in as <strong>${user.email}</strong></p>\r\n          <p>${doc.data().bio}</p>\r\n          <p class=\"pink-text\">${user.admin ? 'Admin' : ''}</p>\r\n          `;\r\n          accauntDetails.innerHTML = accauntDescription;\r\n        });\r\n\r\n      loggedInLinks.forEach(item => (item.style.display = 'block'));\r\n      loggedOutLinks.forEach(item => (item.style.display = 'none'));\r\n    } else {\r\n      adminItems.forEach(item => (item.style.display = 'none'));\r\n      accauntDetails.innerHTML = '';\r\n\r\n      loggedInLinks.forEach(item => (item.style.display = 'none'));\r\n      loggedOutLinks.forEach(item => (item.style.display = 'block'));\r\n    }\r\n  }\r\n}\r\n\r\nexport default Navbar;\r\n","import { auth } from '../../auth/auth-settings';\r\nimport { dataBase } from '../../auth/auth-settings';\r\nimport M from 'materialize-css';\r\nimport './component-recipes.scss';\r\n\r\nclass Recipes {\r\n  constructor() {}\r\n\r\n  init(container) {\r\n    this.addToScreen(container, 'beforeend', this.renderRecipesList());\r\n\r\n    this.initCollapsible();\r\n  }\r\n\r\n  addToScreen(container, position, element) {\r\n    container.insertAdjacentHTML(position, element);\r\n  }\r\n\r\n  renderRecipesList() {\r\n    return `\r\n    <div class=\"container\" style=\"margin-top: 40px;\">\r\n      <ul class=\"collapsible popout z-depth-0 recipes\" style=\"border: none;\">\r\n      </ul>\r\n    </div>`;\r\n  }\r\n\r\n  setupRecipeItem(data) {\r\n    const recipesList = document.querySelector('.recipes');\r\n\r\n    if (data.length) {\r\n      let items = '';\r\n\r\n      data.forEach(doc => {\r\n        const { title, ingredients, description, image } = doc.data();\r\n        const recipeItemHTMLElement = `\r\n        <li>\r\n          <div class=\"collapsible-header grey lighten-4\">\r\n            <h6>${title}</h6>\r\n          </div>\r\n          <div class=\"collapsible-body white\">\r\n            <img src=\"${image}\" class=\"recipe__image\">\r\n          </div>\r\n          <div class=\"collapsible-body white\">\r\n            <strong>Ingredients</strong>\r\n            <p>${ingredients}</p>\r\n          </div>\r\n          <div class=\"collapsible-body white\">\r\n            <span>${description}</span>\r\n          </div>\r\n        </li>`;\r\n\r\n        items += recipeItemHTMLElement;\r\n      });\r\n\r\n      recipesList.innerHTML = items;\r\n    } else {\r\n      recipesList.innerHTML =\r\n        '<h5 class=\"center-align\">Login to view recipes</h5>';\r\n    }\r\n  }\r\n\r\n  initCollapsible() {\r\n    document.addEventListener('DOMContentLoaded', function() {\r\n      const elems = document.querySelectorAll('.collapsible');\r\n\r\n      M.Collapsible.init(elems);\r\n    });\r\n  }\r\n}\r\n\r\nexport default Recipes;\r\n","import M from 'materialize-css';\r\nimport './component-modals-style.scss';\r\n\r\nclass Modals {\r\n  constructor() {}\r\n\r\n  init(container) {\r\n    this.addToScreen(container, 'beforeend', this.renderModals());\r\n\r\n    this.initModals();\r\n  }\r\n\r\n  initModals() {\r\n    document.addEventListener('DOMContentLoaded', function() {\r\n      const elems = document.querySelectorAll('.modal');\r\n      const options = {\r\n        dismissible: true,\r\n      };\r\n      M.Modal.init(elems, options);\r\n    });\r\n  }\r\n\r\n  addToScreen(container, position, element) {\r\n    container.insertAdjacentHTML(position, element);\r\n  }\r\n\r\n  renderModals() {\r\n    return `\r\n      ${this.renderAccountModal()}\r\n      ${this.renderCreateRecipeModal()}\r\n      ${this.renderLoginModal()}\r\n      ${this.renderSignUpModal()}`;\r\n  }\r\n\r\n  renderSignUpModal() {\r\n    return `\r\n      <div id=\"modal-signup\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n          <h4>Sign up</h4><br />\r\n          <form id=\"signup-form\">\r\n            <div class=\"input-field\">\r\n              <input type=\"email\" id=\"signup-email\" required />\r\n              <label for=\"signup-email\">Email address</label>\r\n            </div>\r\n            <div class=\"input-field\">\r\n              <input type=\"password\" id=\"signup-password\" required />\r\n              <label for=\"signup-password\">Choose password</label>\r\n            </div>\r\n            <div class=\"input-field\">\r\n              <input type=\"text\" id=\"signup-bio\" required />\r\n              <label for=\"signup-bio\">One Line Bio</label>\r\n            </div>\r\n            <button class=\"btn red darken-1 z-depth-0\">Sign up</button>\r\n            <p class=\"error pink-text center-align\"></p>\r\n          </form>\r\n        </div>\r\n      </div>`;\r\n  }\r\n\r\n  renderLoginModal() {\r\n    return `\r\n      <div id=\"modal-login\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n          <h4>Login</h4><br />\r\n          <form id=\"login-form\">\r\n            <div class=\"input-field\">\r\n              <input type=\"email\" id=\"login-email\" required />\r\n              <label for=\"login-email\">Email address</label>\r\n            </div>\r\n            <div class=\"input-field\">\r\n              <input type=\"password\" id=\"login-password\" required />\r\n              <label for=\"login-password\">Your password</label>\r\n            </div>\r\n            <button class=\"btn red darken-1 z-depth-0\">Login</button>\r\n            <p class=\"error pink-text center-align\"></p>\r\n          </form>\r\n        </div>\r\n      </div>`;\r\n  }\r\n\r\n  renderCreateRecipeModal() {\r\n    return `\r\n      <div id=\"modal-create\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n          <h4>Create Recipe</h4><br />\r\n          <form id=\"create-form\">\r\n            <div class=\"input-field\">\r\n              <input type=\"text\" id=\"title\" required>\r\n              <label for=\"title\">Recipe Title</label>\r\n            </div>\r\n            <div class=\"input-field\">\r\n              <input type=\"text\" id=\"image\" required>\r\n              <label for=\"image\">Recipe Image Link</label>\r\n            </div>\r\n            <div class=\"input-field\">\r\n              <textarea id=\"ingredients\" class=\"materialize-textarea\" required></textarea>\r\n              <label for=\"ingredients\">Recipe Ingredients</label>\r\n            </div>\r\n            <div class=\"input-field\">\r\n              <textarea id=\"content\" class=\"materialize-textarea\" required></textarea>\r\n              <label for=\"content\">Recipe Description</label>\r\n            </div>\r\n            <button class=\"btn red darken-1 z-depth-0\">Create</button>\r\n          </form>\r\n        </div>\r\n      </div>`;\r\n  }\r\n\r\n  renderAccountModal() {\r\n    return `\r\n      <div id=\"modal-account\" class=\"modal\">\r\n        <div class=\"modal-content center-align\">\r\n          <h4>Account details</h4><br />\r\n          <div class=\"account-details\"></div>\r\n        </div>\r\n      </div>`;\r\n  }\r\n}\r\n\r\nexport default Modals;\r\n","import './component-form-style.scss';\r\n\r\nclass Form {\r\n  constructor() {}\r\n\r\n  init(container) {\r\n    this.addToScreen(container, 'beforeend', this.renderAdminForm());\r\n  }\r\n\r\n  addToScreen(container, position, element) {\r\n    container.insertAdjacentHTML(position, element);\r\n  }\r\n\r\n  renderAdminForm() {\r\n    return `\r\n    <form class=\"center-align admin-actions admin\" style=\"display: none;\">\r\n      <div class=\"input-field\">\r\n        <input  type=\"email\" id=\"admin-email\" placeholder=\"User email\" required />\r\n      </div>\r\n      <button class=\"btn-small red darken-1 z-depth-0\">Make admin</button>\r\n    </form>`;\r\n  }\r\n}\r\n\r\nexport default Form;\r\n","import {\r\n  addSignUpListener,\r\n  addLogOutListener,\r\n  addLogInListener,\r\n  authStateChanged,\r\n  createRecipe,\r\n  adminCloud,\r\n} from './auth/auth';\r\n\r\nimport Navbar from './components/component-navbar/component-navbar';\r\nimport Recipes from './components/component-recipes/component-recipes';\r\nimport Modals from './components/component-modals/component-modals';\r\nimport Form from './components/component-form/component-form';\r\nimport './styles/base.scss';\r\n\r\nconst root = document.querySelector('#root');\r\n\r\nconst navbar = new Navbar();\r\nconst recipes = new Recipes();\r\nconst modals = new Modals();\r\nconst form = new Form();\r\n\r\nnavbar.init(root);\r\nform.init(root);\r\nrecipes.init(root);\r\nmodals.init(root);\r\n\r\nexport const setupRecipeItem = recipes.setupRecipeItem;\r\nexport const setupNavbarUI = navbar.setupNavbarUI;\r\n\r\nauthStateChanged();\r\naddSignUpListener();\r\naddLogOutListener();\r\naddLogInListener();\r\ncreateRecipe();\r\nadminCloud();\r\n","import { auth } from './auth-settings';\r\nimport { dataBase } from './auth-settings';\r\nimport { functions } from './auth-settings';\r\nimport { setupRecipeItem, setupNavbarUI } from '../index';\r\nimport M from 'materialize-css';\r\n\r\n//add admin cloud function\r\nexport const adminCloud = () => {\r\n  const adminForm = document.querySelector('.admin-actions');\r\n\r\n  adminForm.addEventListener('submit', e => {\r\n    e.preventDefault();\r\n\r\n    const adminEmail = document.querySelector('#admin-email').value;\r\n    const addAdminRole = functions.httpsCallable('addAdminRole');\r\n\r\n    addAdminRole({ email: adminEmail }).then(result => console.log(result));\r\n  });\r\n};\r\n\r\n// auth state\r\nexport const authStateChanged = () => {\r\n  auth.onAuthStateChanged(user => {\r\n    if (user) {\r\n      user.getIdTokenResult().then(idTokenResult => {\r\n        user.admin = idTokenResult.claims.admin;\r\n\r\n        setupNavbarUI(user);\r\n      });\r\n      dataBase.collection('recipes').onSnapshot(\r\n        snapshot => {\r\n          setupRecipeItem(snapshot.docs);\r\n        },\r\n        err => {\r\n          console.log(err.message);\r\n        },\r\n      );\r\n    } else {\r\n      setupRecipeItem([]);\r\n      setupNavbarUI();\r\n    }\r\n  });\r\n};\r\n\r\n//create Recipe\r\nexport const createRecipe = () => {\r\n  const createForm = document.querySelector('#create-form');\r\n  createForm.addEventListener('submit', e => {\r\n    e.preventDefault();\r\n\r\n    dataBase\r\n      .collection('recipes')\r\n      .add({\r\n        title: createForm['title'].value,\r\n        image: createForm['image'].value,\r\n        ingredients: createForm['ingredients'].value,\r\n        description: createForm['content'].value,\r\n      })\r\n      .then(() => {\r\n        const modalCreate = document.querySelector('#modal-create');\r\n\r\n        M.Modal.getInstance(modalCreate).close();\r\n        createForm.reset();\r\n      })\r\n      .catch(err => {\r\n        M.toast({ html: err.message });\r\n      });\r\n  });\r\n};\r\n\r\n// signup\r\nexport const addSignUpListener = () => {\r\n  const signUpForm = document.querySelector('#signup-form');\r\n\r\n  signUpForm.addEventListener('submit', e => {\r\n    e.preventDefault();\r\n\r\n    const email = signUpForm['signup-email'].value;\r\n    const password = signUpForm['signup-password'].value;\r\n\r\n    auth\r\n      .createUserWithEmailAndPassword(email, password)\r\n      .then(cred => {\r\n        return dataBase\r\n          .collection('users')\r\n          .doc(cred.user.uid)\r\n          .set({\r\n            bio: signUpForm['signup-bio'].value,\r\n          });\r\n      })\r\n      .then(() => {\r\n        const modalSignUp = document.querySelector('#modal-signup');\r\n        M.Modal.getInstance(modalSignUp).close();\r\n        signUpForm.reset();\r\n        signUpForm.querySelector('.error').textContent = '';\r\n      })\r\n      .catch(err => {\r\n        // M.toast({ html: err.message });\r\n        signUpForm.querySelector('.error').textContent = err.message;\r\n      });\r\n  });\r\n};\r\n\r\n// signout\r\nexport const addLogOutListener = () => {\r\n  const logOut = document.querySelector('#logout');\r\n\r\n  logOut.addEventListener('click', e => {\r\n    e.preventDefault();\r\n\r\n    auth.signOut();\r\n  });\r\n};\r\n\r\n// login\r\nexport const addLogInListener = () => {\r\n  const logInForm = document.querySelector('#login-form');\r\n\r\n  logInForm.addEventListener('submit', e => {\r\n    e.preventDefault();\r\n\r\n    const email = logInForm['login-email'].value;\r\n    const password = logInForm['login-password'].value;\r\n\r\n    auth\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then(cred => {\r\n        const modalLogIn = document.querySelector('#modal-login');\r\n        M.Modal.getInstance(modalLogIn).close();\r\n        logInForm.reset();\r\n        logInForm.querySelector('.error').textContent = \"\";\r\n      })\r\n      .catch(err => {\r\n        // M.toast({ html: err.message });\r\n        logInForm.querySelector('.error').textContent = err.message;\r\n      });\r\n  });\r\n};\r\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgNTU3LjUgMjEyLjgiIHdpZHRoPSIyNTAwIiBoZWlnaHQ9Ijk1NCI+PHN0eWxlPi5zdDB7ZmlsbDojZjE1YjJifS5zdDF7ZmlsbDojOTUxYTFkfTwvc3R5bGU+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI1MC4zIDEwMC44SDI4MnY4NC43aC0zMS43eiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0wIDIuM2gzMS44djEzLjNDMzcuMiA3LjMgNDcuNSAwIDYyLjYgMGMxMy4xIDAgMjEuNyA0LjggMjYuMiAxNCA4LjYtOS44IDIwLTE0IDMyLjEtMTQgMTguNyAwIDMxLjggMTAuOCAzMS44IDMxLjl2NTcuM2gtMzIuMXYtNTRjMC03LjYtNy4yLTEyLjEtMTMuOS0xMi4xLTguMiAwLTE0LjUgNi0xNC41IDE0LjN2NTEuOGgtMzJ2LTU0YzAtNy42LTcuMy0xMi4xLTEzLjctMTIuMS04LjQgMC0xNC43IDYtMTQuNyAxNC4zdjUxLjhIMFYyLjN6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTAgOTkuOWgzMS45VjExN2M1LjMtMTMuMSAxNC42LTE4LjUgMjcuMi0xOC4zdjI5LjhjLTE3LjctMS0yNy4yIDQuOS0yNy4yIDE3djM5SDBWOTkuOXpNOTMuNSAxMzIuNmMxLjMtOS42IDYuOC0xNC42IDE0LjYtMTQuNiA4LjYgMCAxMyA1LjUgMTMuMyAxNC42SDkzLjV6bS0uMSAxNi43aDU4Ljh2LTcuOGMwLTMwLjUtMjAuMy00NC4xLTQ0LjEtNDQuMS0yNS45IDAtNDcgMTctNDcgNDQuNnYxLjNjMCAyOCAxOS45IDQzLjQgNDcgNDMuNCAyNi4yIDAgNDAuOS0xMC44IDQ0LTI5LjRoLTI5LjljLTEuMyA0LjItNC45IDcuNy0xMi45IDcuNy05LjEgMC0xNS4xLTUuNS0xNS45LTE1LjdNMTU2IDE0My41di0xLjNjMC0yOC44IDIwLjQtNDQuNSA0NS45LTQ0LjUgMjEuMiAwIDQwLjggOS4xIDQyLjQgMzUuNmgtMzBjLTEtNi44LTMuOS0xMS4yLTExLjctMTEuMi05LjQgMC0xNC4zIDYuNS0xNC4zIDE5LjR2MS4zYzAgMTMuOCA0LjUgMjAuNyAxNC43IDIwLjcgNy4zIDAgMTIuMi00LjUgMTMtMTIuOGgyOC43Yy0uOCAyMS45LTE1LjIgMzYtNDMuNyAzNi0yNS40IDAtNDUtMTQuNC00NS00My4yTTM1MC4zIDE0Mi42di0xLjNjMC0xMy42LTUuNS0yMC4xLTE1LjEtMjAuMS05LjQgMC0xNC43IDcuMS0xNC43IDIwLjF2MS4zYzAgMTMuMSA1LjIgMTkuOCAxNC45IDE5LjggOS42IDAgMTQuOS02LjggMTQuOS0xOS44bS02MC45LTQyLjdoMzEuOXYxMi4zYzQuNy03LjkgMTMuMS0xNC42IDI1LjktMTQuNiAxOS4zIDAgMzUuNSAxNC40IDM1LjUgNDQuMXYxLjNjMCAyOS42LTE2LjQgNDMuNy0zNS42IDQzLjctMTIuNSAwLTIxLjUtNi0yNS44LTE0LjN2NDAuM2gtMzEuOVY5OS45ek00MTcuNCAxMzIuNmMxLjMtOS42IDYuOC0xNC42IDE0LjYtMTQuNiA4LjYgMCAxMyA1LjUgMTMuMyAxNC42aC0yNy45em0tLjIgMTYuN0g0NzZ2LTcuOGMwLTMwLjUtMjAuMy00NC4xLTQ0LjEtNDQuMS0yNS45IDAtNDcgMTctNDcgNDQuNnYxLjNjMCAyOCAxOS45IDQzLjQgNDcgNDMuNCAyNi4yIDAgNDAuOC0xMC44IDQ0LTI5LjNINDQ2Yy0xLjQgNC4yLTQuOSA3LjYtMTIuOSA3LjYtOS4xIDAtMTUuMS01LjUtMTUuOS0xNS43TTQ3Ny44IDE1Ny40SDUwN2MxIDUuNSAzLjIgOC44IDEwLjUgOC44IDYuMiAwIDguOS0yLjQgOC45LTYgMC0zLjctMy42LTUuNy0xNC45LTcuMS0yMi44LTIuNi0zMi45LTguOC0zMi45LTI2LjkgMC0xOS40IDE3LTI4LjcgMzcuOC0yOC43IDIyIDAgMzYuOCA3LjMgMzguNyAyOGgtMjguN2MtMS01LTMuNy03LjktOS42LTcuOS01LjggMC04LjQgMi42LTguNCA1LjggMCAzLjkgMy45IDUuNSAxMy4zIDYuNSAyNC41IDIuOSAzNS44IDguOCAzNS44IDI3LjEgMCAyMC45LTE1LjkgMjkuOC0zOS45IDI5LjgtMjQuNy0uMS0zOS4zLTEwLjMtMzkuOC0yOS40Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTE4My4zIDU3LjZMMTQ3LjcuNkgxODRsMTcgMzAuOUwyMTQuOC42aDMzLjZsLTQ2LjMgODguMWgtMzQuNHoiLz48Zz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjQ3LjQgODcuMWMxMy40IDEwLjEgMzIuNSA3LjQgNDIuNi02IDYtOCA3LjUtMTggNC45LTI2LjktMi4yIDIuMi01LjggMi41LTguMy41LS4yLS4xLS4zLS4zLS41LS41LTIgMS4zLTQuNyAxLjItNi44LS4zLTEuNC0xLTIuMi0yLjUtMi40LTQuMS0xLS4xLTItLjUtMi45LTEuMS0yLjMtMS43LTMuMS00LjktMS45LTcuNC0yLjItMi4yLTIuNC01LjYtLjUtOC4xbC4zLS4zYy0xMS4yLTIuMy0yMy4yIDEuNy0zMC41IDExLjUtMTAuMSAxMy40LTcuNCAzMi41IDYgNDIuNyIvPjwvZz48L3N2Zz4=\""],"sourceRoot":""}